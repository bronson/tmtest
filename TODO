Create tests:

Calling with unkown switches, both short and long.
Not specifying values for switches that take values.
Naming the test on the command line
Naming a dir on the command line
Naming a file that doesn't end in ".test" on the command line.
Tests that fail before they're run (bad config files)
Tests that fail to run (syntax error)
Try running a testfile whose name contains a single quote.
Disabling an entire directory using a config file.

2.0:
- write a function to make it easy to create crfiles.
- Make diff work in subdirs (need to cd back to superdir before
  forking, and use the proper partial path for the file)
- Ensure that diffing works when running multiple tests in multiple dirs.
- figure out whether to call it MODIFY or EACHLINE.
  clean up the syntax.
- add a CLEAR_EACHLINE option or something, to turn off all modifications.
- get rid of all the exit(10) calls in test.c.  We need a better way to abort the test.
  should get rid of a whole bunch in main.c as well.
  this should prevent us from dropping turds in /tmp all the time.
- Rewrite the test date and author if they aren't supplied.
- should probably indent stdout and stderr clauses two spaces.  otherwise
  we might misinterpret STDOUT: and STDERR: in a stdout or stderr clause.

2.2:
- Add the ability to run multiple tests from one testfile
- Change the I/O scheme to be event based.  Get rid of the tempfiles.
  Convert to using the async io library.  Don't use temporary files.
  This would allow us to recognize that the test is disabled before
     producing a partial diff, thus saving the user from blowing away his files.
- Unify the line modifier in compare.c and test.c.
- allow multiple s/// expressions on a single line.  will probably require modifications to pcrs_compile_command, so make it support buf/len at the same time.
- add the ability to run valgrind over each test and print success/failure of that.
- add gcov support so you can see what sort of coverage your tests provide.
?:
- Provide some sort of XML output.
- it's stupid to dup the str just to null-terminate it so it can be passed to pcrs.
  modify pcrs to compile buffers too.


- Wow, the pcrs error messages suck.  Is there any way to improve them?
  "(pcrs:) Syntax error while parsing command (-11)."


Never:

It's a shame that bash 3 can't print the correct line numbers when
feeding the script on stdin.  Bash 2 works fine.  For no good reason
bash3 no longer allows you to set LINENO.  Weird.

