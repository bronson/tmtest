- Make diff work in subdirs (need to cd back to superdir before
  forking, and use the proper partial path for the file)
- Ensure that it works when running multiple tests in multiple dirs.

- get rid of all the exit(10) calls in test.c.  We need a better way to abort the test.

# TODO: write a function that allows you to disable the test.  <-- yes
# TODO: write a function to make it easy to create crfiles.


Create tests:

Calling with unkown switches, both short and long.
Not specifying values for switches that take values.
Naming the test on the command line
Naming a dir on the command line
Naming a file that doesn't end in ".test" on the command line.


Longer term:

Convert to using the async io library.  Don't use temporary files.
Add the eachline operator.
the status file is too goddamn difficult to parse.
    think of a real format instead of a stupid logfile format.
put the config files explicitly in the exec, rather than looping over them
Add the ability to run multiple tests from one testfile
print a warning if a result section is found with nonws chars (test_parse_section())
Provide some sort of XML output.
There should be a way to run it with valgrind.


Won't be fixed:

It's a shame that bash can't print the correct line numbers when
    feeding the script on stdin.

