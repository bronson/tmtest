#!/usr/bin/perl -w

# cstrfy
# Scott Bronson
# Copyright (c) 2003

# This file is distrubuted under the MIT License
# See http://en.wikipedia.org/wiki/MIT_License for more.


# cstrfy -n varname < file > varname.c
#
# If "-n name" is omitted, names the variable "string".
# Prints result to stdout.


use strict;

my $varname = "string";
if($ARGV[0] eq '-n') {
	shift;
	$varname = shift;
}

my @chars = do { local $/; split //, <STDIN> };
push @chars, "\0";
print "/* Generated by cstrfy.  DO NOT EDIT! */\n\n";
print "const char $varname\[" . @chars . "] = {\n";
while(@chars) {
	for(splice @chars, 0, 16) { printf "0x%02X, ", ord $_ };
	print "\n";
}
print "};\n";

